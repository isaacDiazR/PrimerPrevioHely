<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CafeterÃ­a Coquetas</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/pixel-art.css">
    <link rel="stylesheet" href="assets/css/kawaii-extras.css">
</head>
<body class="pixel-mode-active">
    <!-- Kawaii Corner Decorations -->
    <div class="kawaii-corner-decoration top-left">ğŸŒ¸</div>
    <div class="kawaii-corner-decoration top-right">ğŸ’–</div>
    <div class="kawaii-corner-decoration bottom-left">ğŸ€</div>
    <div class="kawaii-corner-decoration bottom-right">âœ¨</div>
    
    <!-- Kawaii Decorative Elements -->
    <div class="kawaii-decoration" style="top: 10%; left: 5%;">ğŸŒ¸</div>
    <div class="kawaii-decoration" style="top: 20%; right: 10%;">ğŸ’–</div>
    <div class="kawaii-decoration" style="top: 40%; left: 3%;">âœ¨</div>
    <div class="kawaii-decoration" style="top: 60%; right: 7%;">ğŸ€</div>
    <div class="kawaii-decoration" style="bottom: 30%; left: 8%;">ğŸŒ™</div>
    <div class="kawaii-decoration" style="bottom: 15%; right: 12%;">â­</div>
    <div class="kawaii-decoration" style="top: 70%; left: 15%;">ğŸ¦‹</div>
    <div class="kawaii-decoration" style="top: 30%; right: 15%;">ğŸŒˆ</div>
    
    <div class="container">
        <!-- Header Section -->
        <div class="header kawaii-special-card kawaii-super-tooltip" 
             data-kawaii-tooltip="ğŸ’– Sistema de gestiÃ³n sÃºper kawaii ğŸ’–">
            <h1>ğŸ’– CafeterÃ­a Caprichosas ğŸŒ¸</h1>
            <p>âœ¨ Gestiona tu inventario de productos de manera eficiente y sÃºper adorable ğŸ’•</p>
            
            <!-- Kawaii Status Indicator -->
            <div class="kawaii-status online" style="margin: 10px 0;">
                ğŸŒŸ Sistema Activo
            </div>
            
            <div class="stats" id="stats">
                <!-- Las estadÃ­sticas se cargarÃ¡n dinÃ¡micamente -->
            </div>
        </div>

        <!-- Controls Section -->
        <div class="controls kawaii-animated-border">
            <button class="btn btn-primary kawaii-special kawaii-super-tooltip" 
                    data-kawaii-tooltip="âœ¨ Crea un nuevo producto kawaii âœ¨"
                    onclick="showProductModal()">
                â• AÃ±adir Producto
            </button>
            
            <input type="text" 
                   class="search-input kawaii-super-tooltip" 
                   data-kawaii-tooltip="ğŸ’– Busca tus productos favoritos ğŸ’–"
                   placeholder="âœ¨ Buscar productos... ğŸ’–" 
                   id="searchInput"
                   onkeyup="handleSearch(this.value)">
            
            <select class="select kawaii-super-tooltip" 
                    data-kawaii-tooltip="ğŸŒ¸ Filtra por tipo de producto ğŸŒ¸"
                    id="typeFilter" onchange="handleFilterChange()">
                <option value="">ğŸŒˆ Todos los tipos</option>
                <option value="coffee">â˜• CafÃ©s</option>
                <option value="food">ğŸ¥ Comidas</option>
                <option value="drink">ğŸ¥¤ Bebidas</option>
                <option value="dessert">ğŸ° Postres</option>
            </select>
            
            <select class="select kawaii-super-tooltip" 
                    data-kawaii-tooltip="â­ Filtra por estado â­"
                    id="statusFilter" onchange="handleFilterChange()">
                <option value="">ğŸ€ Todos los estados</option>
                <option value="true">âœ… Activos</option>
                <option value="false">âŒ Inactivos</option>
            </select>
            
            <button class="btn btn-secondary kawaii-super-tooltip" 
                    data-kawaii-tooltip="ğŸ’« Exporta tus datos ğŸ’«"
                    onclick="exportProducts()">
                ğŸ“¤ Exportar
            </button>
        </div>

        <!-- Kawaii Divider -->
        <div class="kawaii-divider"></div>

        <!-- Products Grid -->
        <div class="products-grid" id="productsContainer">
            <!-- Los productos se cargarÃ¡n dinÃ¡micamente -->
        </div>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">AÃ±adir Producto</h2>
                <span class="close" onclick="hideProductModal()">&times;</span>
            </div>
            <form id="productForm" onsubmit="handleProductSubmit(event)">
                <div class="form-group">
                    <label for="productName">Nombre del Producto *</label>
                    <input type="text" id="productName" name="name" required 
                           placeholder="Ej: CafÃ© Americano">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="productType">Tipo *</label>
                        <select id="productType" name="type" required onchange="updateCategoryOptions()">
                            <option value="">Seleccionar tipo...</option>
                            <option value="coffee">â˜• CafÃ©</option>
                            <option value="food">ğŸ¥ Comida</option>
                            <option value="drink">ğŸ¥¤ Bebida</option>
                            <option value="dessert">ğŸ° Postre</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="productCategory">CategorÃ­a *</label>
                        <select id="productCategory" name="category" required>
                            <option value="">Seleccionar categorÃ­a...</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="productPrice">Precio *</label>
                        <input type="number" id="productPrice" name="price" required 
                               min="0" step="100" placeholder="0">
                    </div>

                    <div class="form-group">
                        <label for="productStock">Stock *</label>
                        <input type="number" id="productStock" name="stock" required 
                               min="0" placeholder="0">
                    </div>
                </div>

                <div class="form-group">
                    <label for="productDescription">DescripciÃ³n</label>
                    <textarea id="productDescription" name="description" 
                              placeholder="DescripciÃ³n opcional del producto..."></textarea>
                </div>

                <div class="form-group">
                    <label class="checkbox-container">
                        <input type="checkbox" id="productActive" name="active" checked>
                        <span class="checkmark"></span>
                        Producto activo
                    </label>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="hideProductModal()">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <span id="submitButtonText">AÃ±adir Producto</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification Area -->
    <div id="notification" class="notification">
        <span id="notificationMessage"></span>
        <button onclick="hideNotification()">&times;</button>
    </div>

    <!-- Kawaii Welcome Progress -->
    <div id="kawaiiWelcome" class="kawaii-progress-kawaii" 
         style="position: fixed; bottom: 20px; left: 20px; right: 20px; z-index: 1000;"
         data-text="Cargando Kawaii Mode">
    </div>

    <!-- Scripts -->
    <!-- Constants (must be loaded first) -->
    <script type="module" src="assets/js/constants/index.js"></script>
    
    <!-- Utilities -->
    <script src="assets/js/utils/storageManager.js"></script>
    <script src="assets/js/utils/domUtils.js"></script>
    <script src="assets/js/utils/validationUtils.js"></script>
    
    <!-- Legacy config for backward compatibility -->
    <script src="assets/js/config.js"></script>
    
    <!-- Core modules -->
    <script src="assets/js/utils/eventEmitter.js"></script>
    <script src="assets/js/models/product.js"></script>
    <script src="assets/js/services/productService.js"></script>
    <script src="assets/js/views/productView.js"></script>
    <script src="assets/js/controllers/productController.js"></script>
    <script src="assets/js/pixel-mode.js"></script>
    <script src="assets/js/app.js"></script>
</body>
</html>
